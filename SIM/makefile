############################################################################
########################## Cadence Commands ################################
############################################################################
############################################################################



xelb: 
	@xrun \
			-access +rwc \
			-timescale 1ns/1ps \
			-sv -sysv \
			-incdir ../RTL -f rtl_filelist.f -incdir ../TB/ -f tb_filelist.f \
			-uvm -uvmhome /home/cadence/cadence_installs/Xcelium/tools.lnx86/methodology/UVM/CDNS-1.2 \
			-define cdnc +fsmdebug \
			-snapshot tb_top_snap -createdebugdb \
			-elaborate

hcln:
	rm -rf *.log  *.pb *.jou xsim.dir *.wdb xrun* xcelium.d dump* waves* *.vcd
	reset
	@ls -ltrh

run:
	xrun -batch -sv -access +rwc -timescale 1ns/1ps -f rtl_filelist.f -f tb_filelist.f

grun:
	xrun -gui -sv -access +rwc -timescale 1ns/1ps -f rtl_filelist.f -f tb_filelist.f

sim:
	xrun -r tb_top_snap

###########################################################################
########################## Vivado Commands ################################
###########################################################################
###########################################################################

XVLOG				= E:/Xilinx/Vivado/2020.2/bin/xvlog
XELAB				= E:/Xilinx/Vivado/2020.2/bin/xelab
XSIM				= E:/Xilinx/Vivado/2020.2/bin/xsim
HOME				= /home/rashid/ras_work/UVM_TB_FIFO/CODE

###########################################################################
########################## File Compilation ###############################
###########################################################################
###########################################################################
	
FILELIST_RTL		=  ./rtl_filelist.f 
FILELIST_TB	    	=  ./tb_filelist.f 
						


###########################################################################
########################## Simulation Vars ################################
###########################################################################
###########################################################################

TEST_NAME				   = sanity_test 
TIMESCALE				   = -timescale 1ns/1ps
TOP_MODULE				   = tb_top	
TOP_MODULE_SNAPSHOT		   = tb_top_snapshot

COMP_OPT				   = --incr --relax
UVM 					   = -L uvm
UVM_VERSION                = --uvm_version 1.2 		
UVM_VERBOSITY_CONTROL 	   = UVM_MEDIUM
SV_SEED                    = -sv_seed 100

XVLOG_LOG                  = --log ./$(TEST_NAME)/compilation.log          
XELAB_LOG                  = --log ./$(TEST_NAME)/elaboration.log
XSIM_LOG                   = --log ./$(TEST_NAME)/run_simulation.log

###########################################################################
########################### Make Targets ##################################
###########################################################################
###########################################################################

compilation	:
			#rm -rf $(TEST_NAME)
			#mkdir $(TEST_NAME)
			xvlog -sv -f $(FILELIST_RTL) -f $(FILELIST_TB) $(COMP_OPT)   

elaboration	: compilation
			xelab $(TIMESCALE) -debug all -top $(TOP_MODULE) --relax -s $(TOP_MODULE_SNAPSHOT)       

simulation	: elaboration
			xsim $(TOP_MODULE_SNAPSHOT) -R $(SV_SEED) 
			
###########################################################################
######################### WAVES ARE CHECKED FROM GTKWAVE ##################
######################### USING TB_TOP GENERATED DUMPFILE #################
###########################################################################

wave: simulation dump.vcd
	@gtkwave dump.vcd &
	
	
clean: 
	echo "---------------------------------Running Clean--------------------------------" 
	@rm -rf *.jou *.log *.pb *.wdb xsim.dir xsim.covdb xcrg_report *.vcd *.key	# This deletes all files generated by Vivado
	@rm -rf .*.timestamp *.trn *.dsn qaLog.txt xrun.history xcelium.d 	    # This deletes all our timestamps
	reset
	ls -ltrh


# .PHONY		: clean
# .PHONY		: wave

